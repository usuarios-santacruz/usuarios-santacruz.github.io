(window.agentWebpackJsonp=window.agentWebpackJsonp||[]).push([[9],{648:function(t,e,n){"use strict";var a=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(144),a=a(n(339)),n=n(706),n=(0,o.connect)(function(t){return t})((0,a.default)(n.Launcher,"Launcher"));e.default=n},706:function(t,e,n){"use strict";var a=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Launcher=void 0;var s=a(n(100)),c=a(n(101)),i=a(n(73)),l=a(n(74)),r=a(n(340)),u=a(n(142)),o=a(n(143)),d=a(n(98)),g=a(n(28)),p=a(n(23)),f=n(50),m=n(16),h=n(82),v=n(22),_=n(29),w=n(145),y=n(342),E=a(n(99)),b=a(n(24)),C=n(81),A=n(707);function T(n){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=(0,d.default)(n);return e=a?(t=(0,d.default)(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),(0,o.default)(this,e)}}var W="".concat(m.MQzK2nz,"/cta_help.png"),S="".concat(m.MQzK2nz,"/cta_chat.png"),M="".concat(m.MQzK2nz,"/cta_icon.png"),I="".concat(m.MQzK2nz,"/cta_help_b.png"),N="".concat(m.MQzK2nz,"/cta_chat_b.png"),k="".concat(m.MQzK2nz,"/cta_icon_b.png"),L=null,m=function(t){(0,u.default)(o,t);var e,n,a=T(o);function o(t){return(0,i.default)(this,o),(t=a.call(this,t)).handleToggle=t.handleToggle.bind((0,r.default)(t)),t.handleTouchMove=t.handleTouchMove.bind((0,r.default)(t)),t.addAnimatedImageSupport=t.addAnimatedImageSupport.bind((0,r.default)(t)),t.getAnimatedImageClass=t.getAnimatedImageClass.bind((0,r.default)(t)),t.state={dimensions:{height:""}},t}return(0,l.default)(o,[{key:"isPNG",value:function(t){return"png"===(("string"==typeof t?t.split(".").pop():null)||t)}},{key:"hasAPNGSupport",value:function(){return!(h.DEVICE__EDGE||h.DEVICE__IE11||navigator.userAgent.match(/MSIE ([0-9]+)\./)&&10<=parseInt(RegExp.$1)||navigator.userAgent.match(/Chrome\/([0-9]+)\./)&&parseInt(RegExp.$1)<=58)}},{key:"addAnimatedImageSupport",value:function(){(0,b.default.searchInsideShadowRoot)(".aivochat-animated-image")[0].forEach(function(t){L.animateImage(t)})}},{key:"getAnimatedImageClass",value:function(t){var e=this.hasAPNGSupport()?"":"aivochat-animated-image";return e=this.isPNG(t||"")?e:""}},{key:"handleToggle",value:(n=(0,c.default)(s.default.mark(function t(e){var n,a,o,c,i;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),o=this.props,n=o.dispatch,a=o.agentConfig,c=a.chatWindow.launcher.position||"right_bottom",o="right"===c.split("_")[0]?"right":"left",a._windowOpened){t.next=17;break}return t.next=7,(0,y.importAgentAppChunk)();case 7:return i=t.sent,a.chatWindow.staticPosition||E.default.dragWindow(o),t.next=11,n((0,f.setAppConfig)({AgentApp:i}));case 11:(i=c=null,_.isSmallWindow)()&&null!==a.ctaMobile?(c=a.ctaMobile.ctaType,i=!!a.ctaMobile.complements):(0,_.isSmallWindow)()||null===a.ctaWeb||(c=a.ctaWeb.ctaType,i=!!a.ctaWeb.complements),i=[{action:"event_id",param:a.app.id},{action:"event_type",param:"firstInteraction-chat"},{action:"cta_type",param:c},{action:"activated_button",param:i},{action:"event",param:"open_cta"}],(0,C.setEventAnalytics)(a.user.id,a.app.id,window.navigator.userAgent,i),n((0,f.openWindow)());case 17:case"end":return t.stop()}},t,this)})),function(t){return n.apply(this,arguments)})},{key:"handleTouchMove",value:function(t){var e,n,a,o,c=b.default.searchInsideShadowRoot(".agent-launcher")[0],i=c.classList.value;(0,_.isSmallWindow)()&&-1!==(-1!==i.indexOf("aivochat-launcher")||-1!==i.indexOf("agent-launcher")||i.indexOf("custom-html-css"))&&(t.preventDefault(),a=window.scrollY||window.pageYOffset,o=window.scrollX||window.pageXOffset,e=c.offsetWidth||c.clientWidth,n=c.offsetHeight||c.clientHeight,i=t.changedTouches[0].pageX-e/2,t=t.changedTouches[0].pageY-n/2,a=window.outerHeight-t-n+a,o=i-o,c.style.top="auto",c.style.right="auto",(a=a>window.outerHeight-n?window.outerHeight-n:a)<0&&(a=0),(o=o>window.outerWidth-e?window.outerWidth-e:o)<0&&(o=0),c.style.bottom="".concat(a,"px"),c.style.left="".concat(o,"px"))}},{key:"importAPNG",value:(e=(0,c.default)(s.default.mark(function t(){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,y.importAPNGChunk)();case 2:L=t.sent,this.addAnimatedImageSupport();case 4:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"componentDidMount",value:function(){var e=this,n=b.default.searchInsideShadowRoot(".agent-launcher")[0],t=this.props,a=t.dispatch,o=t.agentConfig,c=o.chatWindow.launcher,i=c.type,t=c.mobile,c=b.default.searchInsideShadowRoot,s=null;(0,_.isSmallWindow)()&&null!==o.ctaMobile?s=o.ctaMobile.ctaType:(0,_.isSmallWindow)()||null===o.ctaWeb||(s=o.ctaWeb.ctaType),n&&(n.addEventListener?n.addEventListener("touchmove",this.handleTouchMove):n.attachEvent("touchmove",this.handleTouchMove),this.hasAPNGSupport()||this.importAPNG()),(4===i&&!(0,_.isSmallWindow)()||(0,_.isSmallWindow)()&&4===t.type)&&setTimeout(function(){var t=(0,_.getHeightParentOrChild)(n);e.setState({dimensions:{height:t+30}})},1e3),c(".agent-launcher").length&&c(".agent-launcher")[0].addEventListener("click",function(){var t=[{action:"event_id",param:o.app.id},{action:"event_type",param:"firstInteraction-chat"},{action:"cta_type",param:s},{action:"event",param:"open_cta"}];(0,C.setEventAnalytics)(o.user.id,o.app.id,window.navigator.userAgent,t),a((0,f.openWindow)())});c=window.document.querySelector(".agent-launcher");c&&c.addEventListener("click",function(){var t=[{action:"event_id",param:o.app.id},{action:"event_type",param:"firstInteraction-chat"},{action:"cta_type",param:s},{action:"event",param:"open_cta"}];(0,C.setEventAnalytics)(o.user.id,o.app.id,window.navigator.userAgent,t),a((0,f.openWindow)())})}},{key:"getLauncher",value:function(){var t=this.props.agentConfig.chatWindow.launcher,e=t;return(0,_.isSmallWindow)()&&t.mobile?e=t.mobile:!(0,_.isSmallWindow)()&&t.web&&(e=t.web),e.enabled=t.enabled,e}},{key:"render",value:function(){var c=this,s=this,l=this.props.agentConfig,t=l.chatWindow,a=t.launcher,r=t.staticPosition,u=t.colors,e=l._windowOpened,n=l.__launcherHidden,t=l.chatWindow.launcher.enabled,d=!e&&t&&!n,o=b.default.searchInsideShadowRoot,i=b.default.removeElement,p=b.default.createElement,f=function(t,e,n){var a=t.target.height+20;switch(n){case"right_bottom":case"center_bottom":case"left_bottom":case"right_top":case"center_top":case"left_top":3!==e&&4!==e&&(a+=40)}c.setState({dimensions:{height:a}})},m=function(t){var e=s.getAnimatedImageClass(a.image),n=s.getLauncher();switch(t||n.type){case 2:case 3:return g.default.createElement("img",{crossOrigin:"anonymous",className:e,src:n.image});case 4:return i("#custom_launcher_styles"),n.css&&o()[0].appendChild(p("style",{id:"custom_launcher_styles",innerHTML:"".concat(n.css)})),g.default.createElement("div",{dangerouslySetInnerHTML:{__html:n.html.replace(/(\\")/gm,'"')}});default:return h(t||n.type)}},h=function(t){var e="",n=(0,w.contrast)(u[0]),a=l.ctaWeb||null,o=l.ctaWeb?l.ctaMobile:null;switch(t){case 1:e=n?W:I;break;case 5:e=n?S:N;break;case 6:e=n?M:k}return a.showNotification&&!(0,_.isSmallWindow)()||o.showNotification&&(0,_.isSmallWindow)()?g.default.createElement("div",{className:"aivochat-launcher__notification"},g.default.createElement("div",{className:"aivochat-launcher__notification-icon"},g.default.createElement("p",null,"1")),g.default.createElement("img",{src:e,className:c.getAnimatedImageClass(e),crossOrigin:"anonymous"})):g.default.createElement("img",{src:e,className:c.getAnimatedImageClass(e),crossOrigin:"anonymous"})};return g.default.createElement("div",null,function(){var t,c=s.getLauncher(),e=l.chatWindow.launcher.position;(0,_.isSmallWindow)()&&l.ctaMobile?t=l.ctaMobile:!(0,_.isSmallWindow)()&&l.ctaWeb&&(t=l.ctaWeb);function n(t){var e=(0,_.getPositionClass)(c.position||"right_bottom"),n=r?v.KEY__STATIC_POSITION:"",a="".concat(d?v.KEY__ELEMENT_SHOW:v.KEY__ELEMENT_HIDE),o="".concat(v.KEY__LAUNCHER," ").concat(e," ").concat(n," ").concat(a);switch(t||c.type){case 1:case 5:case 6:return"".concat(o," custom-background");case 2:return"".concat(o," ").concat(v.KEY__LAUNCHER_TYPE_WITH_IMAGE," custom-background");case 3:return"".concat(o," ").concat(v.KEY__LAUNCHER_TYPE_ONLY_IMAGE);case 4:return"".concat(e," ").concat(a," ").concat(v.KEY__LAUNCHER_TYPE_CUSTOM)}}var a=e;if(!c.enabled)return null;(0,_.isSmallWindow)()&&(a=l.chatWindow.launcher.mobile.position);var o=s.state.dimensions,i=s.props.dispatch;switch(c.type){case 3:return g.default.createElement("div",null,g.default.createElement("div",{id:"".concat(v.KEY__LAUNCHER),className:"".concat(n()),onClick:s.handleToggle,onLoad:function(t){return f(t,c.type,a)}},m()),g.default.createElement(A.CTAButtons,{dispatch:i,dimensions:o,colors:u,classPosition:a,ctaButtonsData:t,agentConfig:l}));case 4:return g.default.createElement("div",null,g.default.createElement("div",{id:"".concat(v.KEY__LAUNCHER),className:"".concat(n()),onLoad:function(t){return f(t,c.type,a)}},m()),g.default.createElement(A.CTAButtons,{dispatch:i,dimensions:o,colors:u,classPosition:a,ctaButtonsData:t,agentConfig:l}));default:return g.default.createElement("div",null,g.default.createElement("div",{id:v.KEY__LAUNCHER,className:n(),onClick:s.handleToggle,onLoad:function(t){return f(t,c.type,a)}},m()),g.default.createElement(A.CTAButtons,{dispatch:i,dimensions:o,colors:u,classPosition:a,ctaButtonsData:t,agentConfig:l}))}}())}}]),o}(g.default.Component);(e.Launcher=m).propTypes={agentConfig:p.default.object,dispatch:p.default.func}},707:function(t,e,n){"use strict";var a=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.CTAButtons=void 0;var o=a(n(73)),c=a(n(74)),i=a(n(340)),s=a(n(142)),l=a(n(143)),r=a(n(98)),u=a(n(19)),p=a(n(28)),d=n(50),f=a(n(23)),m=a(n(24)),h=n(29),g=n(81);function v(n){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=(0,r.default)(n);return e=a?(t=(0,r.default)(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),(0,l.default)(this,e)}}n=function(t){(0,s.default)(n,t);var e=v(n);function n(t){var l;return(0,o.default)(this,n),l=e.call(this,t),(0,u.default)((0,i.default)(l),"handleCloseCTAButtons",function(t,e,n,a){t.preventDefault();a=[{action:"event_id",param:n.id},{action:"event_type",param:"close_cta_buttons"},{action:"cta_type",param:n.ctaType},{action:"activated_buttons",param:null!==a},{action:"event",param:"close_cta_buttons"}];(0,g.setEventAnalytics)(e.user.id,e.app.id,window.navigator.userAgent,a),l.props.dispatch((0,d.setConfig)({_showCTAButtons:!1})),l.setState({closedComponent:!0})}),(0,u.default)((0,i.default)(l),"calculateMargin",function(t){switch(t){case"right_bottom":case"center_bottom":case"left_bottom":return"bottom";default:return"top"}}),(0,u.default)((0,i.default)(l),"handleSendButtonCTA",function(t,e,n,a,o,c,i){t.preventDefault();var s=n.app,t=m.default.getUsers()[0],a=[{action:"event_id",param:c.id},{action:"event_type",param:"firstInteraction-chat"},{action:"cta_type",param:c.ctaType},{action:"activated_button",param:null!==i},{action:"event",param:"click_send_button"},{action:"event_value",param:o},{action:"group",param:a}];(0,g.setEventAnalytics)(n.user.id,n.app.id,window.navigator.userAgent,a),l.props.dispatch((0,d.setConfig)({_showCTAButtons:!1})),l.setState({closedComponent:!0}),e((0,d.openWindow)()),e((0,d.sendMessage)(o,t,s.id))}),(0,u.default)((0,i.default)(l),"handleSendMessageCTA",function(t,e,n,a,o){t.preventDefault();a=[{action:"event_id",param:a.id},{action:"event_type",param:"firstInteraction-chat"},{action:"cta_type",param:a.ctaType},{action:"activated_button",param:null!==o},{action:"event",param:"click_send_message"},{action:"group",param:a.message}];(0,g.setEventAnalytics)(n.user.id,n.app.id,window.navigator.userAgent,a),l.setState({closedComponent:!0}),l.props.dispatch((0,d.setConfig)({_showCTAButtons:!1})),e((0,d.openWindow)())}),l.state={closedComponent:!1},l}return(0,c.default)(n,[{key:"render",value:function(){var n=this,t=this.props,a=t.dispatch,e=t.dimensions,o=t.colors,c=t.classPosition,i=t.ctaButtonsData,s=t.agentConfig,l=i.complements,r=s,u=this.state.closedComponent,d=r._showCTAButtons,t=this.calculateMargin(c),s="top"===t?e.height:0,e="bottom"===t?e.height:0;return u&&!d||null===i.message&&null===l?null:p.default.createElement("div",{className:"cta-buttons__notification-container \n            cta-buttons__notification__".concat(c),style:{marginTop:"".concat(s,"px"),marginBottom:"".concat(e,"px")}},null!==i.message&&(0,h.isSmallWindow)()||!(0,h.isSmallWindow)()?p.default.createElement("div",{className:"cta-buttons__notification-container-close"},p.default.createElement("i",{style:{background:o[0]},className:"material-icons",onClick:function(t){return n.handleCloseCTAButtons(t,r,i,l)}},"close")):null,null!==i.message?p.default.createElement("div",{onClick:function(t){return n.handleSendMessageCTA(t,a,r,i,l)},className:"cta-buttons__notification-container-message"},p.default.createElement("h4",null,i.message)):null,null===l||(0,h.isSmallWindow)()?null:p.default.createElement("div",{className:"cta-buttons__notification-container-buttons"},l.map(function(e){return p.default.createElement("div",{className:"cta-buttons__notification-container-buttons-element",key:e.name},p.default.createElement("button",{style:{background:o[0]},onClick:function(t){return n.handleSendButtonCTA(t,a,r,e.name,e.intention,i,l)}},e.name))})))}}]),n}(p.default.Component);(e.CTAButtons=n).propTypes={dispatch:f.default.func,colors:f.default.array,classPosition:f.default.string,ctaButtonsData:f.default.object,dimensions:f.default.object,agentConfig:f.default.object}}}]);